# 组件的主要领域问题

界定范围：通用组件，本质上是对一些"常用逻辑"进行封装处理，面临的主要问题是：使用者在运行时各种差异的需求。
因此主要问题一：如何尽量少工作量地支持好差异化需求。主要是通过 createComponent 实现。

问题二：在编写通用组件时，支持的需求越多，组件就会越大越难维护，如何尽量语义化让代码即需求。(模式问题)

问题三：组件在"封装功能"时，需要界定清楚自己与"全局环境"的边界。如使用 history/window 等。
同时还可能需要系统补足一些能力，例如 modal 组件，要在打开时获取鼠标点击的位置。
还有可能要对系统进行监听，例如 backToTop 监听了 scroll（参考 vue/composable，都可以变成直接生成 reactive data) 
(系统约定，副作用)

问题四：在交互领域，大的组件是由原子元素构成，在当做整体使用时，会要求原子有些不同的行为、样式，这些逻辑写在哪里？
虽然这些行为和样式是要求原子来实现，但是逻辑写在原子中就违背了"语意"。（要扩展组件能力）

问题五：在交互领域，组件的在外观上可能是分布式的，如何表达界面上的分布？（要扩展组件能力）

问题六：没有实际 UI 元素的能力，应该以什么形似来承载？在 react 中也是组件和 render props。
解：用 hooks 的方式来解，例如 form/mouse position/scroll

问题七：因为 dom 这个 UI 环境的原因，有些组件需要用到 width 等排版后才知道的数据，怎么处理？
也考虑用 hooks???

## 问题三
对全局的依赖，需要通过接口声明，这样由系统可以提供机制进行覆盖。
目的是为了减少冲突，也能创造沙箱进行测试。

## 问题四
TODO 理论上应该写在组合组件上，这就要求原子组件的能力和行为能够被覆写。

## 问题五
TODO 使用函数生成分散的 vnode 节点，然后再进行使用？？？

## 问题六，没有实际 UI 元素的能力例子
1. anchor 和自己的 link
2. form 和自己的 items

## 问题七
TODO useRenderedLayout???


