var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,i=(e,i)=>{for(var a in i||(i={}))t.call(i,a)&&o(e,a,i[a]);if(n)for(var a of n(i))r.call(i,a)&&o(e,a,i[a]);return e},a=(e,o)=>{var i={};for(var a in e)t.call(e,a)&&o.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&n)for(var a of n(e))o.indexOf(a)<0&&r.call(e,a)&&(i[a]=e[a]);return i};import{C as c,s,c as l,F as u,a as p,b as d,d as f}from"./vendor.e33af789.js";function y(e,t){if(!e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw new Error(t)}catch(n){}}}!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const r=new URL(e,location),o=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,i)=>{const a=new URL(e,r);if(self[t].moduleMap[a])return n(self[t].moduleMap[a]);const c=new Blob([`import * as m from '${a}';`,`${t}.moduleMap['${a}']=m;`],{type:"text/javascript"}),s=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){i(new Error(`Failed to import: ${e}`)),o(s)},onload(){n(self[t].moduleMap[a]),o(s)}});document.head.appendChild(s)})),self[t].moduleMap={}}}("/axii/assets/");const h=Object.keys;function m(e,t){return h(e).forEach((n=>{t(e[n],n)}))}const v="abcdefghijklmnopqrstuvwxyz0123456789".length;function g(e=""){let t="",n=-1;return()=>(n=n===v-1?0:n+1,t=(0===n?t:t.slice(0,t.length-1))+"abcdefghijklmnopqrstuvwxyz0123456789"[n],`${e}_${t}`)}function b(e,t,n,r,o,i,a,c){if(void 0===t)throw new Error("invariant requires an error message argument");if(e)return;let s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{const e=[n,r,o,i,a,c];let l=0;s=new Error(t.replace(/%s/g,(()=>e[l++]))),s.name="Check"}throw s.framesToPop=1,s}const w=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;const k=new RegExp(`^(${["flex","flex-grow","flex-shrink","line-height","z-index"].reduce((function(e,t){return e.concat(t,/-/.test(t)?t.replace(/(.+)-([a-z])(.+)/,((e,t,n,r)=>`${t}${n.toUpperCase()}${r}`)):[])}),[]).join("|")})$`,"i"),E="patch.remain";function j(e,t,n){let r;const o=function(){let e=!1;const t=new Array(100);let n=99,r=0;return{lock:()=>e=!0,unlock:()=>e=!1,track:function(o){if(e)throw new Error(`tracking tree locked, trying to track ${o.type.displayName}`);void 0===t[o.level]&&(t[o.level]=new Set),t[o.level].add(o),o.level<n&&(n=o.level),o.level>r&&(r=o.level)},dispose:function(e){void 0!==t[e.level]&&(t[e.level].delete(e),0===t[e.level].size&&(t[e.level]=void 0))},walk(e,o){if(99!==n){for(let i=n;i<r+1;i++)void 0!==t[i]&&(t[i].forEach(e),o&&(t[i]=void 0));o&&(n=99,r=0)}},isEmpty:()=>99===n}}(),i=new Map;let a=null;function c(r){b(!a,`already in session ${a}`),a="session.update";try{r&&r(),o.isEmpty()&&0===i.size||n.session("session.update",(()=>{o.walk((t=>{const r=t.isPainted?"unit.repaint":"unit.paint";n.unit("session.update",r,t,(()=>{const r=t.isPainted?e.repaint:e.paint,{toPaint:a={},toRepaint:c={},toDispose:s={}}=n.handlePaintResult(r(t),t);m(a,(e=>o.track(e))),m(c,(e=>{o.track(e),i.delete(e)})),m(s,(e=>{o.dispose(e,!0),i.delete(e)}))}))})),o.lock(),o.walk((e=>{const r=e.isDigested?"unit.updateDigest":"unit.initialDigest";n.unit("session.update",r,e,(()=>{(e.isDigested?t.updateDigest:t.initialDigest)(e)}))}),!0),o.unlock(),i.forEach(((e,r)=>{e.forEach((e=>{n.unit("session.update","unit.partialUpdateDigest",r,(()=>{t.updateElement(e,r,e)}))})),i.delete(r)}))}))}catch(c){console.error(c)}finally{a=null}}return{startInitialSession:function(i){return a="session.initial",n.session("session.initial",(()=>{r=e.createCnode({type:function({destroyed:e}){return e?null:i}}),o.track(r),o.walk((t=>{n.unit("session.initial","unit.paint",t,(()=>{const{toPaint:r}=n.handlePaintResult(e.paint(t),t);m(r,(e=>o.track(e)))}))})),o.lock(),o.walk((e=>{n.unit("session.initial","unit.initialDigest",e,(()=>{t.initialDigest(e)}))}),!0),o.unlock()})),a=null,r},startUpdateSession:c,collectChangedCnodes:e=>{e.forEach((e=>o.track(e))),a||c()},collectChangedVnode:e=>{e.forEach(((e,t)=>{let n=i.get(t);n||i.set(t,n=new Set),e.forEach((e=>{n.add(e)}))})),a||c()},getCurrentSession:()=>a}}class C{}const O=g("Com");function x(e){return null===e.type?"null":e.type===Array?"Array":e.type===String?"String":e.type===C?"Fragment":"string"==typeof e.type?e.type:"object"==typeof e.type||"function"==typeof e.type?(void 0===e.type.displayName&&(e.type.displayName=e.type.name&&/[A-Z]/.test(e.type.name[0])?e.type.name:O()),e.type.displayName):void 0}function N(e,t,n=[]){e.forEach(((e,r)=>{const o=n.concat(function(e,t){const n=void 0!==e.rawKey?e.rawKey:`[${t}]`;return`<${x(e)}>${n}`}(e,r));t(e,o.join("-"))||void 0===e.children||N(e.children,t,o)}))}function S(e){return"string"!=typeof(t=e.type)&&null!==t&&t!==String&&t!==Array&&t!==C;var t}function R(e,t){return e.reduce(((e,n)=>{if(null===n.type)return e;if(n.type===String||"string"==typeof n.type)return[n.element];if(n.type===Array||n.type===C)return n.children.reduce(((e,n)=>e.concat(R([n],t))),[]);{const e=t.next[n.id];if(!e)throw new Error(`unknown vnode with path ${n.id}`);return R(e.patch,e)}}),[])}const $=(P=!1,function e(t,n,r){let o=null;if(t.type===String||"string"==typeof t.type)o=t.element;else if(t.type===Array||t.type===C)(P?t.children.slice():t.children.slice().reverse()).some((t=>(o=e(t,n,r),Boolean(o))));else if(r(t)){const e=n.next[t.id];if(!e)throw new Error(`unknown vnode type ${t.id}`);return P?e.view.startPlaceholder:e.view.endPlaceholder}return o});var P;class I{}function A(e){if(e instanceof I)return e;let t;if(void 0===e?t={type:String,value:"undefined"}:null===e?t={type:null}:Array.isArray(e)?t={type:Array,children:e.map(A),raw:e}:"number"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e||(t={type:String,value:e.toString()}),t){const e=new I;return Object.assign(e,t),e}return e}function T(e=A){function t(t,n,...r){const o=new I;o.attributes=n||{},o.type=o.attributes.use||t,delete o.attributes.use,"string"==typeof t&&(o.name=t),void 0!==o.attributes.ref&&(o.ref=o.attributes.ref,delete o.attributes.ref),void 0!==o.attributes.vnodeRef&&(o.vnodeRef=o.attributes.vnodeRef,delete o.attributes.vnodeRef),void 0!==o.attributes.key&&(o.rawKey=o.attributes.key,delete o.attributes.key),void 0!==o.attributes.transferKey&&(o.rawTransferKey=o.attributes.transferKey,delete o.attributes.transferKey),void 0!==o.attributes.isSVG&&(o.isSVG=o.attributes.isSVG,delete o.attributes.isSVG);let i=r;return void 0!==o.attributes.children&&(b(0===i.length,"can not createElement with both children and prop.children"),i=o.attributes.children,delete o.attributes.children),void 0!==o.attributes.forceUpdate&&(o.forceUpdate=o.attributes.forceUpdate,delete o.attributes.forceUpdate),o.children=i.map(e),"string"==typeof o.type&&(o.dataset=o.attributes.dataset,delete o.attributes.dataset),o.vnodeRef&&o.vnodeRef(o),o}return{createElement:t,cloneElement:function(e,n,...r){const o=t(e.type,i(i({},e.attributes),n),...r.length?r:e.children);return Object.assign(o,{key:e.key,ref:e.ref,name:e.name,portalRoot:e.portalRoot,transferKey:e.transferKey}),o},shallowCloneElement:function(e){const t=new I;return Object.assign(t,e),t},normalizeLeaf:e}}const V=T().shallowCloneElement;function M(e,t){return e.type===String&&e.value!==t.value?{value:t.value}:function(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(let i=0;i<o;i++){const r=n[i];if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1}return!0}(e.attributes,t.attributes)?void 0:{attributes:t.attributes}}function D(){}function L(e,t,{isComponentVnode:n,createCnode:r,normalizeLeaf:o}){const i=function(e,t=!1){return Array.isArray(e)?e:void 0!==e||t?[e]:[]}(e).map((e=>o(e))),a={},c={},s={};return N(i,((e,o)=>{if(e.key=o,e.transferKey=void 0===e.rawTransferKey?void 0:`${x(e)}@${e.rawTransferKey}`,e.id=e.transferKey||e.key,n(e))return a[e.id]=r(e,t),a[e.id].parent=t,void 0!==e.transferKey&&(s[e.transferKey]=e),!0;e.ref&&(c[e.id]=e)})),{next:a,ret:i,transferKeyedVnodes:s,refs:c}}function z(e,t,n){const r=void 0===e.parent?t.rootRender:t.initialRender,{next:o,ret:i,transferKeyedVnodes:a,refs:c}=L(r(e,e.parent),e,n);return e.ret=i,e.next=o,e.refs=c,e.transferKeyedVnodes=a,e.isPainted=!0,{toInitialize:o,newRefs:c}}function K(e={},t,n){const r=V(e);return Object.assign(r,i(i({},t),{action:{type:n}})),r.children&&(r.children=[]),r}function F(e,t,n,r,o){const{isComponentVnode:i,createCnode:a}=o,{toInitialize:c,toRemain:s,newRefs:l}=t,u=K({},e,"patch.insert");n.push(u),i(e)?void 0!==e.transferKey&&void 0!==r.next[e.id]?(b(void 0===e.portalRoot,`portal vnode ${e.name} cannot use transferKey`),s[e.id]=r.next[e.id],void 0!==e.transferKey&&(e.action={type:"patch.moveFrom"})):c[e.id]=a(e,r):void 0!==e.children&&(e.ref&&(l[e.id]=u),e.children.forEach((e=>{F(e,t,u.children,r,o)})))}function _(e,t){t.push(K(e,{},"patch.remove"))}function U(e,t){t.push(K(e,{},"patch.toMove"))}function B(e={},t,n,r,o,i,a,c){const{toInitialize:s,toRemain:l,remainedRefs:u,newRefs:p}=o,{isComponentVnode:d,diffNodeDetail:f}=c,y=K(e,t,n);if(d(t))l[t.id]=r.next[t.id],function(e,t){if(e.type!==t.type)throw new Error("Can not update a cnode to different type");e.lastProps=e.props,e.props=t.attributes||{},e.props.children=t.children}(r.next[t.id],t);else if(y.diff=f(e,t),void 0!==t.children){t.ref&&(u[t.id]=y);const n=q(e.children,t.children,r,a,c);Object.assign(s,n.toInitialize),Object.assign(l,n.toRemain),Object.assign(p,n.newRefs),Object.assign(u,n.remainedRefs),y.children=n.patch}i.push(y)}function W(e,t,n,r,o){const{isComponentVnode:a}=o,c={toRemain:{},toInitialize:{},newRefs:{},remainedRefs:{},patch:[]},s=c.patch,l=e.length,u=t.length;let p=0,d=0;const f=e.map((e=>e.key)),y=(h="key",e.reduce(((e,t,n)=>i(i({},e),{[void 0===h?n:t[h]]:t})),{}));var h;const m=t.map((e=>e.key));let v=0;for(;d<u||p<l;){if(v+=1,1e3===v)throw new Error("patch loop over 1000 times.");b(!(d in t&&void 0===t[d]),"use null instead of undefined to represent empty node");const i=e[p],h=t[d];if(void 0!==i&&a(i)&&void 0!==i.transferKey){if(void 0===r[i.transferKey]){_(i,s),p+=1;continue}if(void 0!==h&&h.type===i.type&&h.transferKey===i.transferKey){B(i,h,E,n,c,s,r,o),p+=1,d+=1;continue}U(i,s),p+=1;continue}if(void 0!==h&&a(h)&&void 0!==h.transferKey){void 0===n.next[h.transferKey]?F(h,c,s,n,o):B(n.transferKeyedVnodes[h.transferKey],h,"patch.moveFrom",n,c,s,r,o),d+=1;continue}if(!(d<u)){void 0!==i.action&&"patch.insert"===i.action.type||_(i,s),p+=1;continue}if(!(p<l)){const e=y[h.key];void 0!==e&&e.type===h.type?B(e,h,"patch.moveFrom",n,c,s,r,o):F(h,c,s,n,o),d+=1;continue}const{action:g={type:E}}=i;"patch.remove"!==g.type?m.includes(i.key)?f.includes(h.key)?h.key===i.key?(h.type!==i.type?(_(i,s),F(h,c,s,n,o)):B(i,h,E,n,c,s,r,o),p+=1,d+=1):(U(i,s),p+=1):(F(h,c,s,n,o),d+=1):("patch.insert"!==g.type&&_(i,s),p+=1):(s.push(i),p+=1)}return c}function q(e,t,n,r,o){const a=i({},n.next),c=i({},n.refs),s={},l={},u={},p={},d={},f={},y=W(e.filter((e=>void 0===e.action||"patch.moveFrom"!==e.action.type)),t,n,r,o);Object.assign(s,y.toInitialize),Object.assign(l,y.toRemain),m(a,((e,t)=>{l[t]||(u[t]=e)})),Object.assign(p,y.newRefs),Object.assign(d,y.remainedRefs),m(c,((e,t)=>{d[t]||(f[t]=e)}));const h=n.toDestroyPatch||{},v=i(i({},u),h);return{toInitialize:s,toRemain:l,toDestroy:u,toDestroyPatch:v,newRefs:p,remainedRefs:d,disposedRefs:f,patch:y.patch}}function H(e,t,n){const r=t.updateRender,o=e.patch||e.ret,a=r(e,e.parent);if(!1===a)return{};const{transferKeyedVnodes:c,ret:s}=L(a,e,n),l=q(o,s,e,c,n);return e.ret=s,e.patch=l.patch,e.next=i(i({},l.toInitialize),l.toRemain),e.transferKeyedVnodes=c,e.toDestroyPatch=l.toDestroyPatch,l}function X(e){const t=this._listeners[e.type];return console.log("calling",e.type),Array.isArray(t)?t.forEach((t=>t(e))):t(e)}function Q(e,t,n,r){if("className"===t&&(t="class"),"key"===t||"ref"===t);else if("class"!==t||r)if("style"===t)n&&"string"!=typeof n||(e.style.cssText=n||""),n&&"object"==typeof n&&m(n,((t,r)=>{void 0===n[r]?e.style[r]="":e.style[r]="number"!=typeof t||w.test(r)||k.test(r)?t:`${t}px`}));else if("dangerouslySetInnerHTML"===t)n&&(e.innerHTML=n.__html||"");else if("o"===t[0]&&"n"===t[1]){const r=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),n?e.addEventListener(t,X,r):e.removeEventListener(t,X,r),(e._listeners||(e._listeners={}))[t]=n}else if("list"!==t&&"type"!==t&&!r&&t in e)!function(e,t,n){try{e[t]=n}catch(r){console.error(r)}}(e,t,null==n?"":n),null!=n&&!1!==n||e.removeAttribute(t);else{const o=r&&t!==(t=t.replace(/^xlink\:?/,""));null==n||!1===n?o?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof n&&(o?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):e.setAttribute(t,n))}else e.className=n||""}function G(e,t,n,r){m(e,((e,o)=>{/^on[A-Z]/.test(o)&&"function"==typeof e?Q(t,o,((...t)=>r(e,...t)),n):"style"===o||"dangerouslySetInnerHTML"===o||!/^_+/.test(o)&&"object"!=typeof e?Q(t,o,e,n):console.warn(`invalid attribute: ${o}, value: ${e}`)}))}function J(e,t){e&&m(e,((e,n)=>{t.dataset[n]=e}))}function Z(e,t,n,r,o){n.view.patchNodesQuickRefById[e.id]=e;const i=R([e],n);return i.forEach((e=>{r.appendChild(e)})),"string"==typeof e.type&&void 0!==e.children&&(e.children=Y(e.children,e.element,null,n,o)),t.push(e),i.length}function Y(e,t,n,r,o){const i=[];let a=o.createFragment();const c=o.createFragment();let s=n;return e.forEach((e=>{if("patch.toMove"===e.action.type);else if("patch.moveFrom"===e.action.type)e.action.type=E,Z(e,i,r,a,o);else if("patch.insert"===e.action.type)e.action.type=E,te(e,r,o,i,a,i.length);else if("patch.remove"===e.action.type)!function(e,t,n){if(n.isComponentVnode(e)){const n=t.toDestroyPatch[e.id],r=n.view.startPlaceholder.parentNode;let o=n.view.startPlaceholder;for(;o!==n.view.endPlaceholder;)o=o.nextSibling,r.removeChild(o.previousSibling);r.removeChild(n.view.endPlaceholder)}else R([e],t).forEach((e=>{e.parentNode.removeChild(e)}))}(e,r,o);else if(e.action.type===E){if(0!==a.childNodes.length){const e=s?s.nextSibling:t.childNodes[0];s=e||a.childNodes[a.childNodes.length-1],t.insertBefore(a,e)}!function(e,t,n,r,o,i){t.push(e),o.view.patchNodesQuickRefById[e.id]=e,"object"!=typeof e.type&&(e.type===Array||e.type===C?e.children=Y(e.children,n,r,o,i):"string"!=typeof e.type&&e.type!==String||(void 0!==e.diff&&(i.updateElement(e,o,e),delete e.diff),"string"==typeof e.type&&void 0!==e.children&&(e.children=Y(e.children,e.element,null,o,i))))}(e,i,t,s,r,o);const n=$(e,r,o.isComponentVnode);n&&(s=n)}})),0!==a.childNodes.length&&(t.insertBefore(a,s?s.nextSibling:t.childNodes[0]),a=null),b(0===c.childNodes.length,"to move length not 0"),i}function ee(e,t,n,r){const o=t?t.key:"root",i=r.createPlaceholder(`start: ${o}`),a=r.createPlaceholder(`end: ${o}`);n.appendChild(i),n.appendChild(a),void 0===n._childCnodes&&(n._childCnodes=[]),n._childCnodes.push(e),e.view={patchNodesQuickRefById:{},getElementByPatchNode:t=>e.view.patchNodesQuickRefById[t.id].element,startPlaceholder:i,endPlaceholder:a,getRootElements:()=>R(e.patch,e)}}function te(e,t,n,r,o,i){const a=n.shallowCloneElement(e);if(r[i]=a,t.view.patchNodesQuickRefById[a.id]=a,null!==e.type){if(e.type===String){const r=n.createElement(e,t,a);return a.element=r,o.appendChild(r)}if(e.type===C||e.type===Array)return ne(e.children,t,n,a.children,o);if(e instanceof I&&!n.isComponentVnode(e))return function(e,t,n,r,o){const i=n.createElement(e,t,r);o.appendChild(i),r.element=i,void 0!==e.children&&(r.children=[],ne(e.children,t,n,r.children,i))}(e,t,n,a,e.portalRoot||o);if(n.isComponentVnode(e))return function(e,t,n,r,o){const i=t.next[e.id];i.patch=[],ee(i,e,o,n),r.element=e.id}(e,t,n,a,e.portalRoot||o);if("object"==typeof(c=e)&&!Array.isArray(c)&&null!==c||"function"==typeof e){const r=n.digestObjectLike(e);if(r&&r.type===String){const e=n.createElement(r,t,a);return a.element=e,o.appendChild(e)}}var c;throw new Error("unknown vnode detected: "+(e?`type: ${e.type||typeof e}, name: ${e.name}, key: ${e.key}`:"undefined"))}}function ne(e,t,n,r,o){e.forEach(((e,i)=>{e.action&&"patch.moveFrom"===e.action.type?Z(e,r,t,o,n):te(e,t,n,r,o,i)}))}function re(e){y(!1,`found object vnode, you should handle your self ${JSON.stringify(e)}`)}function oe({invoke:e,isComponentVnode:t=S,digestObjectLike:n=re,shallowCloneElement:r=V},o,a=(e=>e)){const c=a({createElement:(t,n)=>function(e,t){if(e.type===String)return document.createTextNode(e.value);const n=e.isSVG?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type);return e.attributes&&G(e.attributes,n,e.isSVG,t),e.dataset&&J(e.dataset,n),n}(t,e),updateElement:(t,n)=>{const r=n.view.patchNodesQuickRefById[t.id];return r?(function(e,t,n){e.type===String?t.nodeValue=e.value:(G(e.attributes,t,e.isSVG,n),J(e.dataset,t))}(t,r.element,e),r.element):null},createFragment:()=>document.createDocumentFragment(),createPlaceholder:e=>document.createComment(e)}),s=i(i({},c),{isComponentVnode:t,digestObjectLike:n,shallowCloneElement:r,getRoot:()=>o});return{updateElement:s.updateElement,initialDigest:e=>function(e,t){if(b(!e.isDigested,"cnode is digested, please use updateDigest."),void 0===e.parent&&ee(e,null,t.getRoot(),t),void 0===e.view.startPlaceholder)throw new Error(`cnode is not prepared for initial digest ${e.type.displayName}`);e.patch=[];const n=t.createFragment();ne(e.ret,e,t,e.patch,n);const r=e.view.startPlaceholder.parentNode;r.insertBefore(n,e.view.startPlaceholder.nextSibling),e.view.parentNode=r,e.isDigested=!0}(e,s),updateDigest:e=>function(e,t){b(e.view.parentNode,`cnode has not been initial digested ${e.type.displayName}`),e.view.patchNodesQuickRefById={},e.patch=Y(e.patch,e.view.parentNode,e.view.startPlaceholder,e,t),e.toDestroyPatch={}}(e,s)}}function ie(e,t){const n=Object.create(null),r=e.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}function ae(e){return null!==e&&"object"==typeof e}function ce(e){return function(e){return se.call(e)}(e).slice(8,-1)}const se=Object.prototype.toString;const le=Object.prototype.hasOwnProperty;function ue(e,t){return le.call(e,t)}function pe(e){return"symbol"==typeof e}function de(e,t){return e!==t&&(e==e||t==t)}function fe(e,t,n){e.some(((r,o)=>{if(n(r,t))return e.splice(o,0,t),!0}))||e.push(t)}function ye(e,t){if(!t.length)return[];let n=0;const r=[];if(t)for(;e[n];)t.includes(e[n])?(r.push(e[n]),e.splice(n,1)):n++;return r}function he(e){return"object"==typeof e&&(null===Object.getPrototypeOf(e)||Object===e.constructor)}function me(e,t){return Object.prototype.toString.call(e)===Object.prototype.toString.call(t)}const ve="@@any",ge="set",be="add",we="delete",ke="clear",Ee=new WeakMap,je=[],Ce=new WeakMap,Oe=Symbol("iterate"),xe=Symbol("any");function Ne(e,t,n){let r=e.get(t);return!r&&n&&e.set(t,r=n()),r}const Se={REF:Symbol("ref"),TOKEN:Symbol("token")};function Re(e){return Pe(e,Se.REF)}class $e{}function Pe(e,t,n){Pt("function"==typeof e,"computation must be a function"),e.computed=t?t===Se.REF?jt(void 0,!0):new $e:void 0,e.indeps=new Set,e.levelChildren=new Set,e.level=0,e.type=t,e.deep=n,e.scopeId=Je,Te(e);return Ne(Ce,kt(e.computed),et).computation=e,function(e){if(!rt.length)return;const t=rt[rt.length-1];if(je.length&&!t.includeInner)return;t.computed.push(e)}(e.computed),e.computed}function Ie(e){const t=Ne(Ce,kt(e));if(t){Pt(Object.values(t.keys).every((({computations:e})=>0===e.size)),"computed have deps, can not destroy");const{computation:n}=t;n&&(delete n.scopeId,delete n.type,delete n.computed,n.indeps.forEach((e=>{e.computations.delete(n)})),delete n.indeps,n.levelParent&&n.levelParent.levelChildren.delete(n),n.deleted=!0),Ce.delete(kt(e))}else console.warn("object is not computed or already destroyed")}function Ae(){const{computation:e}=je[je.length-1],t=e.computed instanceof $e;const n=e(Lt(e.computed),(function(e){Xe(kt(e),ve,xe)}));void 0===e.computed?e.computed=Array.isArray(n)||he(n)?bt(n,!0):jt(n,!0):t||(e.type===Se.REF||e.shallow?function(e,t){if(Et(e))e.value=t;else if(Array.isArray(e))e.splice(0,e.length,...t);else{const n=Object.keys(t);Object.keys(e).filter((e=>!n.includes(e))).forEach((t=>delete e[t])),Object.assign(e,t)}}(e.computed,n):Ye(e.computed,n))}function Te(e){Pt(!je.find((({computation:t})=>t===e)),"recursive computation detected"),je.push({computation:e,indeps:new Set});try{!function(){const{computation:e}=je[je.length-1];let t;const n=Ee.get(e);if(n){const e=[];for(;t=n.shift();)e.push(t.computed),n.push(...Ee.get(t)||[]);e.forEach((e=>{Ie(e)}))}}(),Ae();const t=function(){const{computation:e,indeps:t}=je[je.length-1],{indeps:n}=e;let r=!1;return e.indeps=t,e.indeps.forEach((t=>{n.has(t)?n.delete(t):(t.computations.add(e),r=!0)})),n.forEach((t=>{t.computations.delete(e),r=!0})),r}();!function(){if(je.length<2)return;const{computation:e}=je[je.length-1],{computation:t}=je[je.length-2];if(t){let n=Ee.get(t);n||Ee.set(t,n=[]),n.includes(e)||n.push(e)}}(),(t||function(){const{computation:e}=je[je.length-1];return Ee.get(e)&&Ee.get(e).length}())&&Ve(e)}catch(t){console.error(t)}finally{je.pop()}}function Ve(e,t){if(t&&e.level<t+1)return void(e.level=t+1);let n,r=-1;e.indeps.forEach((e=>{const t=function(e){const t=Ne(Ce,kt(e.indep));if(t)return t.computation}(e);t&&t.level>r&&(r=t.level,n=t)}));const o=Ee.get(e);o&&o.forEach((e=>{e.level&&e.level>r&&(r=e.level,n=e)})),n&&e.levelParent!==n&&(e.levelParent&&e.levelParent.levelChildren.delete(e),e.levelParent=n,n.levelChildren.add(e)),e.level!==r+1&&(e.level=r+1,_e&&!Ue.includes(e)&&Ue.push(e),e.levelChildren.forEach((e=>Ve(e)),e.level))}let Me=!1;const De=[];function Le(e){De.includes(e)||De.push(e)}const ze=new Set;const Ke=[],Fe=new Set;let _e=!1,Ue=[];const Be=new Set;let We=0;function qe(){let e,t;for(Pt(!_e,"already in computation digestion"),Pt(!Me,"in digestion callback loop, should not trigger digest"),_e=!0,ze.forEach((e=>e.start&&e.start(Fe,Ke))),We=0;e=Ke.shift();){Ue=[],ze.forEach((t=>t.compute&&t.compute(e,Be,Fe,Ke))),Te(e),Be.add(e);if(ye(Ke,Ue).forEach((e=>{fe(Ke,e,((e,t)=>t.level<e.level))})),We++,We>1e3){console.error("computation called more than 1000, seems like infinite loop"),Ke.splice(0,Ke.length);break}}for(ze.forEach((e=>e.end&&e.end(Be,Fe))),Be.clear(),Fe.clear(),_e=!1,Me=!0;t=De.shift();)t();Me=!1}let He=!1;function Xe(e,t,n){const r=je[je.length-1];if(!r||e===kt(r.computation.computed))return;Pt(!(e instanceof $e),"cannot track computedToken");const o=Ne(Ce,kt(e),et),i=Ne(o.keys,n,(()=>tt(e,n)));r.indeps.add(i)}const Qe=new Set;function Ge(e,t,n,r){if(t===ge&&!0===r)return;const o=new Set,{keys:i}=Ne(Ce,kt(e),et);if(t===ke)i.forEach((({computations:e})=>{e.forEach((e=>o.add(e)))}));else{if(n){const{computations:t}=Ne(i,n,(()=>tt(e,n)));t.forEach((e=>o.add(e)))}if("add"===t||"delete"===t){if(Array.isArray(e)){const{computations:t}=Ne(i,"length",(()=>tt(e,"length")));t.forEach((e=>o.add(e)))}const{computations:t}=Ne(i,Oe,(()=>tt(e,Oe)));t.forEach((e=>o.add(e)))}}const{computations:a}=Ne(i,xe,(()=>tt(e,xe)));a.forEach((e=>o.add(e))),o.size&&function(e,t){e.forEach((e=>{var t;"function"!=typeof(t=e)||void 0===t.computed||void 0===!t.indeps||t.deleted?console.error("invalid computation",e):Ke.includes(e)||fe(Ke,e,((e,t)=>t.level<e.level))})),Fe.add(t),_e||He||qe()}(Array.from(o),e),Qe.size&&Qe.forEach((e=>e()))}let Je=null;function Ze(e,t,n){const r=e instanceof Map;var o;!xt(n)&&me(n,e[t])&&(o=n,Array.isArray(o)||he(o)||o instanceof Map||o instanceof Set)?Ye(r?e.get(t):e[t],n):r?e.set(t,n):e[t]=n}function Ye(e,t){if(Pt(Et(e)||me(e,t),"computed should always return same type"),Et(e))e.value=t;else if(Array.isArray(e))e.splice(t.length),t.forEach(((t,n)=>{Ze(e,n,t)}));else if(he(t)){const n=Object.keys(t);Object.keys(e).filter((e=>!n.includes(e))).forEach((t=>delete e[t])),n.forEach((n=>{const r=t[n];Ze(e,n,r)}))}else if(e instanceof Map){const n=Array.from(t.keys());Array.from(e.keys()).filter((e=>!n.includes(e))).forEach((t=>e.delete(t))),n.forEach((n=>{const r=t.get(n);Ze(e,n,r)}))}else e instanceof Set?(e.forEach((n=>{t.has(n)||e.delete(n)})),t.forEach((t=>{e.has(t)||e.add(t)}))):Pt(!1,"unknown computed value")}function et(){return{keys:new Map}}function tt(e,t){return{indep:e,key:t,computations:new Set}}function nt(e){const t=Ne(Ce,kt(e));return t?t.computation:void 0}const rt=[];function ot(e,t,n=new WeakMap,r=new WeakMap){const o=[];return e.indeps.forEach((({indep:e,key:t})=>{let n;Et(e)?(r.has(e)||r.set(e,Lt(e)),n=r.get(e)):n=Lt(e);let i=o.find((({object:e})=>e===n));i||o.push(i={indep:e,object:n,keys:[],computation:nt(e)}),i.keys.push(t)})),o.forEach((e=>{if(n.has(e.object))e.indeps=n.get(e.object).indeps;else if(function(e){if(!e)return!1;const t=Ne(Ce,kt(e));return t&&t.computation}(e.indep)){const o=nt(e.indep);o?e.indeps=ot(o,t,n,r):console.warn("did not find computation for",e.object)}n.set(e.object,e),t(e)})),o}const it=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(pe)),at=function(e,t,n){const r=Reflect.get(e,t,n);return pe(t)&&it.has(t)?r:Et(r)?r.value:Array.isArray(e)&&ct.includes(t)?(o=r,function(...e){let t;return function(e){if(He)return e();let t;He=!0;try{e()}catch(n){t=n}finally{He=!1}if(t)throw t;_e||qe()}((()=>{t=o.call(this,...e)})),t}):(Xe(e,0,t),ae(r)?bt(r):r);var o},ct=["unshift","push","splice"];function st(){return function(e,t,n,r){const o=e[t],i=Lt(n,!0),a=ue(e,t);let c=!0;try{Reflect.set(e,t,i,r)}catch(s){console.error(s),c=!1}if(e===kt(r)){const n={oldValue:o,newValue:i};a?Ge(e,ge,t,!de(o,i)):Ge(e,be,t,n)}return c}}const lt={get:at,set:st(),deleteProperty:function(e,t){const n=ue(e,t),r=e[t],o=Reflect.deleteProperty(e,t);return o&&n&&Ge(e,we,t,{oldValue:r}),o},has:function(e,t){const n=Reflect.has(e,t);return Xe(e,0,t),n},ownKeys:function(e){return Xe(e,0,Oe),Reflect.ownKeys(e)}},ut=e=>ae(e)?bt(e):e,pt=e=>Reflect.getPrototypeOf(e);const dt={get(e){return function(e,t,n){return Xe(e=kt(e),0,t=kt(t)),n(pt(e).get.call(e,t))}(this,e,ut)},get size(){return Xe(e=kt(e=this),0,Oe),Reflect.get(pt(e),"size",e);var e},has:function(e){const t=kt(this);return Xe(t,0,e=kt(e)),pt(t).has.call(t,e)},add:function(e){e=kt(e);const t=kt(this),n=pt(t),r=n.has.call(t,e),o=n.add.call(t,e);return r||Ge(t,be,e,{newValue:e}),o},set:function(e,t){t=kt(t);const n=kt(this),r=pt(n),o=r.has.call(n,e),i=r.get.call(n,e),a=r.set.call(n,e,t),c={oldValue:i,newValue:t};return o?Ge(n,ge,e,!de(i,t)):Ge(n,be,e,c),a},delete:function(e){const t=kt(this),n=pt(t),r=n.has.call(t,e),o=n.get?n.get.call(t,e):void 0,i=n.delete.call(t,e);return r&&Ge(t,we,e,{oldValue:o}),i},clear:function(){const e=kt(this),t=0!==e.size,n=e instanceof Map?new Map(e):new Set(e),r=pt(e).clear.call(e);return t&&Ge(e,ke,void 0,{oldTarget:n}),r},forEach:function(e,t){const n=this,r=kt(n),o=ut;return Xe(r,0,Oe),pt(r).forEach.call(r,(function(t,r){return e.call(n,o(t),o(r),n)}),t)}};["keys","values","entries",Symbol.iterator].forEach((e=>{dt[e]=function(e){return function(...t){const n=kt(this),r="entries"===e||e===Symbol.iterator&&n instanceof Map,o=pt(n)[e].apply(n,t),i=ut;return Xe(n,0,Oe),{next(){const{value:e,done:t}=o.next();return t?{value:e,done:t}:{value:r?[i(e[0]),i(e[1])]:i(e),done:t}},[Symbol.iterator](){return this}}}}(e)}));const ft={get:(yt=dt,(e,t,n)=>Reflect.get(ue(yt,t)&&t in e?yt:e,t,n))};var yt;const ht=new WeakMap,mt=new WeakMap,vt=new Set([Set,Map,WeakMap,WeakSet]),gt=ie("Object,Array,Map,Set,WeakMap,WeakSet");function bt(e,t){const n=function(e,t,n,r,o){Pt(ae(e),`value cannot be made reactive: ${String(e)}`);let i=t.get(e);if(void 0!==i)return i;if(n.has(e))return e;if(a=e,!gt(ce(a)))return e;var a;const c=vt.has(e.constructor)?o:r;return i=new Proxy(e,c),t.set(e,i),n.set(i,e),i}(e,ht,mt,lt,ft);return t||ht.get(e)||n===e||Ot(n),n}function wt(e){return mt.has(e)}function kt(e){return mt.get(e)||e}function Et(e,t){return!!e&&(t?!0===e._isRef:!0===e._isRef||!0===e._isRefLike)}function jt(e,t){if(Et(e))return e;const n={_isRef:!0,get value(){return Xe(n,0,"value"),e},set value(t){const r=!de(kt(e),t);e=t,Ge(n,ge,"value",r)},get raw(){return e}};return t||Ot(n),n}const Ct=[];function Ot(e){if(!Ct.length)return;Ct[Ct.length-1].push(e)}function xt(e){return wt(e)||Et(e)}function Nt(e,t){return wt(e)?kt(e):Et(e)?t?e.raw:{value:e.raw}:void Pt(!1,"obj is not reactiveLike")}const St=new WeakMap;function Rt(e,t){const n=wt(e)?Nt(e):e;return St.set(n,t)}function $t(e,t){let n=[];return[function(e){const t=[];let n;Ct.push(t);try{e()}catch(r){n=r}finally{Ct.pop()}if(n)throw n;return t}((()=>{n=function(e,t=!1){const n={includeInner:t,computed:[]};let r;rt.push(n);try{e()}catch(o){r=o}finally{rt.pop()}if(r)throw r;return n.computed}(e,t)})),n]}function Pt(e,t,n,r,o,i,a,c){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){let e;if(void 0===t)e=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let s=[n,r,o,i,a,c],l=0;e=new Error(t.replace(/%s/g,(function(){return s[l++]}))),e.name="Invariant Violation"}throw e.framesToPop=1,e}}const It=Object.keys;function At(e,t,n={}){return It(e).reduce(((n,r)=>t(n,e[r],r)),n)}function Tt(e,t){return At(e,((e,n,r)=>t(n,r)?i(i({},e),{[r]:n}):e))}function Vt(e,t){return At(e,((e,n,r)=>i(i({},e),{[r]:t(n,r)})))}const Mt="abcdefghijklmnopqrstuvwxyz0123456789".length;function Dt(e=""){let t="",n=-1;return()=>(n=n===Mt-1?0:n+1,t=(0===n?t:t.slice(0,t.length-1))+"abcdefghijklmnopqrstuvwxyz0123456789"[n],`${e}_${t}`)}function Lt(e,t){return xt(e)?Nt(e,t):e}function zt(e,t,n=[],r){e.forEach(((r,o)=>{const i=function(e,t=[],n){return t.concat(e&&e.key?e.key:`index@${n}`)}(r,n,o);if(Array.isArray(r))zt(r,t,i);else{const n=t(r,i,e);r&&!n&&void 0!==r.children&&zt(r.children,t,i)}}))}function Kt(e,t){e.forEach((e=>{var n;Kt((n=e.next||{},It(n).map((e=>n[e]))),t),t(e)}))}let Ft=null;function _t(){return Ft}const Ut=function(){let e=null,t=!1;return{withEvent:function(n,r){e=n,r((()=>t)),e=null,t=!1},preventCurrentEventDefault:function(){e&&(t=!0)},getCurrentEvent:function(){return e}}}(),Bt=new WeakMap;function Wt(e){return{[e]:(...t)=>({[e]:t.length>1?t.join("-"):t[0]})}}function qt(e,t=Wt){return Object.assign({},t(e),t(`max-${e}`),t(`min-${e}`))}function Ht(e,t=Wt){return Object.assign({},t(e),t(`${e}-top`),t(`${e}-right`),t(`${e}-bottom`),t(`${e}-left`))}const Xt=i(i(i(i(i(i(i(i(i(i(i(i(i(i(i(i({__base:()=>({display:"inline-block"}),display:(...e)=>({display:e.join("-")}),visible:e=>"none"===e?{display:"none"}:"hidden"===e?{visibility:"hidden"}:void 0},Wt("position")),Ht("margin")),Ht("padding")),Ht("border",(e=>Wt(`${e}-width`)))),Wt("white-space")),Wt("box-sizing")),Wt("line-height")),Wt("font-size")),Wt("overflow-x")),Wt("overflow-y")),Wt("left")),Wt("right")),Wt("top")),Wt("bottom")),qt("width")),qt("height")),Qt={block:i(i({},Xt),{__base:()=>({display:"block"})}),inline:Xt,text:{__base:()=>({display:"inline"})}},Gt=e=>function(e,t){return{[t]:n=>({[`${e}-${t}`]:n})}}("flex",e),Jt={table:i(i({layout:e=>({"table-layout":e})},Wt("border-spacing")),Wt("border-collapse")),flex:i(i(i(i(i(i(i(i(i(i({display:()=>({display:"flex"}),"display-inline":()=>({display:"inline-flex"})},Gt("basis")),Gt("grow")),Gt("direction")),Gt("shrink")),Gt("wrap")),Wt("order")),Wt("justify-content")),Wt("align-content")),Wt("align-items")),Wt("align-self"))};function Zt(e,t=[],n={}){return Object.entries(e).forEach((([e,r])=>{"object"==typeof r?Zt(r,t.concat(e),n):n[t.concat(e).join("-")]=r})),n}function Yt(e){const t=Re(e);return t.isVnodeComputed=!0,t.displayName=e.displayName||e.name,t}function en(e){return e&&e.isVnodeComputed}const tn=T((e=>{const t=A(e);return t instanceof I?t:e}));function nn(...e){const t=tn.createElement(...e);return t.attributes&&(t.props=t.attributes),t}const rn=tn.normalizeLeaf,on=tn.shallowCloneElement;function an(e){const t=typeof e;return"string"===t||"number"===t}function cn(e){return function t(...n){function r(e){if(!r.check(e))return new Error("type check failed")}return r.argv=n,r.stringify=e.stringify.bind(r),r.parse=e.parse.bind(r),r.check=e.check.bind(r),r.is=e.is||(e=>e===t),r.zeroValue=e.zeroValue,r.required=e.required,r.required||Object.defineProperty(r,"isRequired",{get:()=>cn(i(i({},e),{required:!0,is:r.is}))(...n)}),r}}function sn(e,t={}){const{stringify:n=JSON.stringify,parse:r=JSON.parse,is:o}=t,c=a(t,["stringify","parse","is"]);function s(t){return"function"!=typeof e||e(t)?"string"==typeof e&&typeof t!==e?new Error(`${t} is not ${e}`):void 0:new Error(`${t} type check failed`)}return s.stringify=n,s.parse=r,s.check=t=>"string"==typeof e?typeof t===e:e(t),s.is=o||(e=>e===s),Object.assign(s,c),s.required||Object.defineProperty(s,"isRequired",{get:()=>sn(e,i(i({},t),{required:!0,is:s.is}))}),s.createDefaultValue?Object.defineProperty(s,"defaultValue",{get(){if(s.createDefaultValue)return s.createDefaultValue()}}):Object.defineProperty(s,"default",{get:()=>n=>sn(e,i(i({},t),{required:s.required,createDefaultValue:n,is:s.is}))}),s}const ln=cn({stringify(e){return null===e?"":an(this.argv[0][0])?e.toString():JSON.stringify(e)},parse(e){return an(this.argv[0][0])?"string"==typeof this.argv[0][0]?e:parseFloat(e):JSON.parse(e)},check(e){return this.argv[0].includes(e)},zeroValue:[]}),un=sn("string",{zeroValue:""}),pn=sn("number",{stringify:e=>e.toString(),parse(e){if(/-?\d+(\.\d+)?/.test(e))return parseFloat(e);throw new Error(`${e} is not a number`)},zeroValue:0}),dn=sn((e=>"object"==typeof e&&!Array.isArray(e)),{zeroValue:null}),fn=sn((e=>Array.isArray(e))),yn=sn("bool",{zeroValue:!1}),hn=sn("function",{stringify:e=>e.toString(),parse:e=>new Function(e)}),mn=sn("symbol"),vn=sn((()=>!0),{stringify(){throw new Error("type any can not stringify")},parse(){throw new Error("type any can not parse")},check(){throw new Error("type any can not check")}}),gn=cn({check(e){return this.argv[0].some((t=>t.check(e)))},stringify(e){return this.argv[0].find((t=>!(t(e)instanceof Error))).stringify(e)},parse(e){let t;if(!this.argv[0].some((n=>{try{const r=n.parse(e);if(!(this.check(r)instanceof Error))return t=r,!0}catch(r){}})))throw new Error(`can not parse ${e}`);return t}}),bn=cn({check(e){return!!Array.isArray(e)&&e.every((e=>this.argv[0].check(e)))},stringify(e){},parse(e){},zeroValue:[]}),wn=cn({check:e=>!0,stringify(e){},parse(e){}}),kn=cn({check(e){return Object.entries(this.argv[0]).every((([t,n])=>n.check(e[t])))},stringify(e){return`{${Object.entries(this.argv[0]).map((([t,n])=>`${t}:${JSON.stringify(n.stringify(e[t]))}`)).join(",")}`},parse(e){const t=JSON.parse(e);return Object.keys(t).forEach((e=>{t[e]=this.argv[0][e].parse(t[e])})),t}});var En=i(i({},{string:un,number:pn,object:dn,array:fn,bool:yn,function:hn,symbol:mn,node:vn,element:vn,elementType:vn,oneOf:ln,oneOfType:gn,arrayOf:bn,shape:wn,map:kn,any:vn,checkPropTypes:function(){}}),{callback:sn("function",{stringify:e=>e.toString(),parse:e=>new Function(e)}),slot:sn((e=>"object"==typeof e&&!Array.isArray(e)),{zeroValue:null})});function jn(e,t,n){let r,o=!0;const i=Pe(((i,a)=>{o?(r=e(a),o=!1,n&&t()):(e(a),t())}),Se.TOKEN);return[r,i]}function Cn(e){if(xt(e)){if(Et(e))return e.value;for(let t in e)e.hasOwnProperty(t)&&"object"==typeof e[t]&&Cn(e[t])}}c(),u(),s(!0),l(!1);const On=new WeakMap;function xn(e,t,n){const r=function(e,t){let n=On.get(e);n||On.set(e,n={});const r=t.join(".");let o=n[r];return o||(n[r]=o={}),o}(t,n);r.vnode="function"==typeof e?Yt(e):e;let{Component:o}=r;return o||(o=function(){return r.vnode},o.isVirtual=!0,o.displayName=e.displayName||"VnodeComputed",r.Component=o),nn(o)}const Nn=["key","ref"];function Sn(e,t,n,r){const o=Object.entries(e.attributes).filter((([e,t])=>xt(t)&&!Nn.includes(e)));o.length&&jn((()=>o.forEach((([e,t])=>Cn(t)))),(()=>{n(e)}))}function Rn(e,t){const n=Array.isArray(e),r=n?e:[e];return zt(r,((e,n,r)=>{const[o,i]=t(e,n);return i&&function(e,t,n){const r=e.indexOf(t);-1!==r&&(e[r]=n)}(r,e,i),o})),n?e:r[0]}function $n(e,t,n){if("object"!=typeof e)return e;return Pt(_t()===n,"you can only call watch reactive props from cnode self"),Pt(0!==rt.length,"you are not collecting computed, can not watch reactive prop vnode"),Rn(e,((e,r)=>{var o;if(!e)return[!0];if(Dn(e))return[!0];if(function(e){return e.attributes&&Object.values(e.attributes).some((e=>Et(e)))}(e)||xt(null==(o=e.attributes)?void 0:o.style))return Sn(e,0,t),[!1];if(Et(e)||"function"==typeof e){return[!0,Et(e,!0)||"function"==typeof e?xn(e,n,r):rn(e.value)]}return[!1]}))}class Pn{constructor(){this.localProps={},this.computed=[],this.viewEffects=[],this.effectClearHandles=[],this.parent=null,this.contexts=new Map}clearComputed(){this.computed.forEach((e=>Ie(e))),this.computed=[]}collectReactive(e,t){let n;const[r,o]=$t((()=>{n=e()}));return this.computed.push(...o),t&&r.forEach((e=>{Bt.set(e,t)})),n}willMount(){}didMount(){this.collectReactive((()=>{this.viewEffects.forEach((e=>{this.effectClearHandles.push(e())}))}))}willUnmount(){this.clearComputed(),this.effectClearHandles.forEach((e=>{e instanceof Promise?e.then((e=>e())):e()}))}willUpdate(){}render(){return this.type.isVirtual?this.virtualCnodeRender():this.cnodeRender()}cnodeRender(){return this.clearComputed(),this.collectReactive((()=>{const e=this.type(function(e){const{props:t,localProps:n}=e,{propTypes:r}=e.type,o={};Object.entries(r||{}).forEach((([e,r])=>{e in t?xt(t[e])||In(t[e])||(o[e]=function(e){return e.is(En.string)||e.is(En.bool)||e.is(En.number)}(r)?{_isRefLike:!0,value:t[e]}:t[e],xt(o[e])&&Rt(o[e])):r.createDefaultValue&&(n[e]=r.createDefaultValue(i(i({},t),n)),xt(n[e])&&Rt(n[e]))}));const a=i(i(i({},t),n),o),c=Vt(r||{},((n,r)=>{const o=a[r];return n?In(o)?o(n,r):n.is(En.callback)?(o,...c)=>{const s=o===Ut.getCurrentEvent()&&0===c.length||void 0===o?[]:[o,...c],l=e.props[r],u=n.createDefaultValue(t),f=Tt(a,xt);let y,h=[];const m=[a,Ut.getCurrentEvent()],v=s.map((e=>Lt(e))).concat(Vt(a,(e=>Lt(e))));if(d(v,(e=>{const t=[...e,...m],n=(null==l?void 0:l.disableDraft)?[...s,...m]:t;l&&l.overwrite?y=l(u,...n):(u(...t),y=!!l&&!1===l(...n))}),(e=>h.push(...e))),y)Ut.preventCurrentEventDefault();else{const e=[...s,f],t=function(e,t){const n=t.length-1,r=t[n];return e.filter((({path:e})=>e[0]===n?xt(r[e[1]]):xt(t[e[0]])))}(h,e);p(e,t.map((e=>{return i(i({},e),{path:(t=e.path,"/"+t.join("/"))});var t})))}}:o:o}));return Object.assign(a,c)}(this),this.ref);return function(e,t){if(!e.type.isVirtual){const[n,r]=An.processLayoutProps(e.props);n&&(Dn(t)?t.attributes=Object.assign({},t.attributes,r):t.attributes=Object.assign({},t.attributes,n))}}(this,e),$n(e,(e=>this.reportChangedVnode(e,this)),this)}),this.type)}virtualCnodeRender(){const e=this.type();return this.lastVnodeComputedRef!==e&&(this.lastVnodeComputedRef=e,this.clearComputed(),this.collectReactive((()=>{jn((()=>e.value),(()=>this.reportChange(this)))}))),this.collectReactive((()=>$n(e.value,(e=>this.reportChangedVnode(e,this)),this)),nt(e))}}function In(e){return"function"==typeof e&&e.isSmart}const An=new class{constructor(e=Qt,t=Jt){this.baseRuleTypes=Object.keys(e),this.flatRules=Zt(Object.assign({},e,t))}match(e){return this.baseRuleTypes.includes(e.type)||this.baseRuleTypes.some((t=>t in(e.attributes||{})))}processLayoutProps(e){const t={},n={};return Object.entries(e).forEach((([e,r])=>{const o=new RegExp("^layout:");o.test(e)&&(t[e.replace(o,"")]=r,n[e]=r)})),Object.keys(t).length?[t,n]:[void 0]}parse(e,t){const n={};let r=!1;return Object.entries(e).forEach((([e,t])=>{const o=e.split("-"),i=o.length<2?[o[0],"__base"]:o,[a,c]=function(e,t){const n=[...t],r=[];for(;!e[n.join("-")]&&n.length;){const e=n.pop();r.unshift(e)}return[e[n.join("-")],r]}(this.flatRules,i);if(a){r=!0;const e=a(..."boolean"==typeof t?c:c.concat(t));!1===t&&0!==c.length&&Object.keys(e).forEach((t=>{n.hasOwnProperty(t)?delete e[t]:e[t]=void 0})),Object.assign(n,e)}})),r?n:void 0}};function Tn(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement}const Vn=new WeakMap;function Mn(e,t){return e.type===String&&e.value!==t.value?{value:t.value}:function(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(let i=0;i<o;i++){const r=n[i];if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1}return!0}(e.attributes,t.attributes)?void 0:{attributes:t.attributes}}function Dn(e){return"function"==typeof e.type&&e.type!==String&&e.type!==Array&&e.type!==C}function Ln(e,t){"function"==typeof t?t(e):t.current=e}function zn(e){let t=null,n=null;const r=[];function o(){t.collectChangedCnodes(r.splice(0))}const c=e=>{r.includes(e)||(r.push(e),Le(o))};let s=new Map;function l(){let e=s;s=new Map,t.collectChangedVnode(e)}const u=(e,t)=>{Pt(e,"report undefined patchNode");let n=s.get(t);n||s.set(t,n=new Set),n.has(e)||(n.add(e),Le(l))},p=e=>{e.reportChange=c,e.reportChangedVnode=u;return e.render()};let d=null;function f(e=[]){0!==e.length&&setTimeout((()=>{t.startUpdateSession((()=>{e.forEach((e=>e()))}))}),0)}return{painterInterfaces:{renderer:{rootRender:p,initialRender:p,updateRender:e=>e.render()},diffNodeDetail:Mn,isComponentVnode:Dn,ComponentNode:Pn,normalizeLeaf:rn},schedulerInterfaces:{handlePaintResult(e,t){const{toInitialize:n,toDestroy:r={},toRemain:o={},newRefs:i={},disposedRefs:c={}}=e;Object.values(n).forEach((e=>{e.didMount&&d.push((()=>{e.didMount()}))})),Kt(Object.values(r),(e=>{e.willUnmount&&e.willUnmount(),e.refs&&Object.values(e.refs).forEach((e=>Ln(null,e.ref)))})),Object.values(i).forEach((e=>{d.unshift((()=>{Ln(t.view.getElementByPatchNode(e),e.ref)}))})),Object.values(c).forEach((e=>{Ln(null,e.ref)}));const s=Tt(o,(e=>e.type.shouldComponentUpdate?e.type.shouldComponentUpdate(e):function(e){if(e.type.isVirtual)return!0;const{props:t}=e,{children:n}=t,r=a(t,["children"]),{lastProps:o}=e,{children:i}=o,c=a(o,["children"]),{type:s}=e;return Object.keys(r).length!==Object.keys(c).length||!!Object.entries(r).some((([e,t])=>!(s.propTypes&&s.propTypes[e]&&s.propTypes[e].is(En.callback))&&t!==c[e]))||Object.keys(n).length!==Object.keys(i).length||!!Object.entries(n).some((([e,t])=>t.type===String?t.value!==i[e].value:null===t.type?t.type!==i[e].type:t!==i[e]))}(e)));return Object.values(s).forEach((e=>{e.willUpdate&&e.willUpdate()})),{toPaint:n,toDispose:r,toRepaint:s}},session:(e,t)=>{Pt(null===d,"last session effect not cleared, something wrong"),d=[],t(),f(d.slice()),d=null},unit:(e,t,n,r)=>("unit.paint"===t&&n.willMount&&n.willMount(),function(e,t){let n,r;Pt(null===Ft,"last working unit is not done"),Ft=e;try{r=t()}catch(o){n=o}finally{Ft=null}if(n)throw n;return r}(n,r))},viewInterfaces:{invoke:(n,r)=>{if(!e.contains(r.target)&&!document.body.contains(r.target))return console.warn("element is remove, should not call callbacks",r),!1;t.startUpdateSession((()=>{Ut.withEvent(r,(()=>{if(n(r),Tn(r.target)){const e=Vn.get(r.target);void 0!==e&&(r.target.value=Et(e)?e.value:e)}}))}))},isComponentVnode:Dn},interceptViewActions(e){var{createElement:t,updateElement:n}=e,r=a(e,["createElement","updateElement"]);const o=(e,...t)=>[on(e),...t],c=Kn(o,[Fn,Un,_n],t),s=Kn(o,[Fn,Un],n);return i({createElement:(e,t)=>{const n=c(e,t);return Tn(n)&&"value"in e.attributes&&Vn.set(n,e.attributes.value),n},updateElement:(e,t)=>{const n=s(e,t);n&&Tn(n)&&"value"in e.attributes&&Vn.set(n,e.attributes.value)}},r)},paint:e=>n=t.startInitialSession(e),receiveScheduler:e=>t=e,apply:e=>t.startUpdateSession(e),dump(){},getCtree:()=>n,destroy:()=>{n.props.destroyed=!0,r.push(n),o()}}}function Kn(e,t,n){return(...r)=>{const o=e(...r);return t.forEach((e=>e(...o))),n(...o)}}function Fn(e){e.attributes=e.attributes?Vt(e.attributes,(e=>Et(e)?e.value:e)):e.attributes}function _n(e,t){t.scopeId&&(e.dataset=i(i({},e.dataset||{}),{scopeId:t.id}))}function Un(e){if(An.match(e)){const t=An.parse(e.attributes,e);t&&(e.attributes=i(i({},e.attributes),{style:Object.assign({},t,e.attributes.style)}))}}function Bn(e,t,n){function r(t,n){return function(r){return new Wn(e,r,t,n)}}return r.elements=function(){const e={};return new Proxy(e,{get:(t,n)=>(e[n]||(e[n]=function(){const e=[],t={},n={getStyle:()=>e,getListeners:()=>t};return new Proxy({},{get:(r,o)=>n[o]?(...e)=>n[o](r,...e):n=>{if("style"===o)e.push(n);else{if("function"!=typeof n)throw new Error(`unknown action: key: ${o} value: ${n}`);t[o]||(t[o]=[]),t[o].push(n)}}})}()),e[n]),set:()=>!1})}(),r.argv={},r.$$modifications=[],Object.defineProperty(r,"modify",{get:()=>e=>r.$$modifications.push(e)}),Object.defineProperty(r,"getModifications",{get:()=>()=>r.$$modifications}),r.$$preparations=[],Object.defineProperty(r,"prepare",{get:()=>e=>r.$$preparations.push(e)}),Object.defineProperty(r,"getPreparations",{get:()=>()=>r.$$preparations}),r}class Wn{constructor(e,t,n,r){this.name=e,this.render=t,this.localVars=n,this.nonReactive=r}}function qn(e){const t=new Map;return{derive(e){let n=t.get(e);return n||t.set(e,n=function(e,t,n){const r={$$fragments:{},$$argv:new WeakMap},o={forEach(e,t){Object.entries(e.$$fragments).forEach(t)}},i={name:e};return new Proxy(r,{get(e,t){if(o[t])return(...n)=>o[t](e,...n);if(t in i)return i[t];const n="anonymous"===t?"$$":t;return e.$$fragments[n]||(e.$$fragments[n]=Bn(n)),e.$$fragments[n]}})}(e.displayName||e.name)),n},forEach:e=>t.forEach(e)}}function Hn(e,t){e.forEach((n=>{const r=e=>Hn(e,t);t?t(r,n,e):r(n.children)}))}function Xn(e,t){return e.filter((e=>{var n;return(e.match||(n=e.propTypes,e=>!n||0===Object.keys(n).length||Object.keys(n).some((t=>void 0!==e[t]))))(t)}))}function Qn(e,t=[]){const n=function(){};n.match=()=>!0,n.Style=e.Style,n.methods=e.methods,n.propTypes=e.propTypes;const r=[n].concat(t).reduce(((e,t)=>(e.push(t),t.Style&&(t.Style.displayName=`${t.name}Style`,e.push(t.Style)),e)),[]);function o(t,o){var{children:c,listeners:s,overwrite:l=[],ref:u}=t,p=a(t,["children","listeners","overwrite","ref"]);const d=e.forwardRef?o:void 0,f=i({},p);var y;e.forwardRef&&(f.ref=u),f.children=c?e.useNamedChildrenSlot?(y=c[0]||{},new Proxy(y,{get:(e,t)=>Et(e[t])?e[t].value:e[t]})):c:void 0;const h=Xn(r,p).concat(s||[],l).filter((e=>!e.match||e.match(f))),m=qn(e.useNamedChildrenSlot);h.forEach((e=>{e(m.derive(e))}));const v=m.derive(n),g=v.root(f)((()=>e(f,v,d)));g.nonReactive=!0;const b=Gn(g,f,d,m,f,e.useNamedChildrenSlot,v);return u&&!e.forwardRef&&(b.type===C?(Pt("function"==typeof u,"component root is a Fragment, you can only use function ref"),b.children.forEach((e=>{e.ref=u}))):b.ref=u),b}for(let i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);return o.propTypes=Object.assign({},...r.map((e=>e.propTypes||{}))),o.forwardRef=!0,o.extend=(...n)=>Qn(e,t.concat(n)),o}function Gn(e,t,n,r,o,a,c){function s(){let s="function"==typeof e.render?e.render():e.render,l=Array.isArray(s)?s:[s];const u=i(i({},o),e.localVars);return r.forEach((t=>{const n=t[e.name].getPreparations();n&&n.forEach((e=>{const t=e(u);t&&(Pt(Object.keys(t).every((e=>!(e in u))),`do not overwrite var in prepare function ${Object.keys(t)}`),Object.assign(u,t))}))})),r.forEach((t=>{const n=t[e.name].getModifications();n&&n.forEach((e=>{const t=e(s,u);t&&(s=t,l=Array.isArray(s)?s:[s])}))})),Hn(l,((o,i,s)=>{if(!i)return;if(i.type===Array||i.type===C)return o(i.children);if(i instanceof Wn||"function"==typeof i||en(i)){Pt(!(en(i)&&!i.computation),"do not use vnodeComputed in fragment, use function instead");const o=i instanceof Wn,l=o?i:c.anonymous()(i);return o||(l.extend=e.name),void(s[s.indexOf(i)]=Gn(l,t,n,r,u,a,c))}if(!i instanceof I||"string"!=typeof i.type)return;const l=i.attributes.style||{},p=Et(l),d=[],f={},y=e.extend||e.name;if(r.forEach((e=>{d.push(...e.global.elements[i.name].getStyle(),...e[y].elements[i.name].getStyle()),Object.entries(e[y].elements[i.name].getListeners()).forEach((([e,t])=>{f[e]||(f[e]=[]),f[e].push(...t)}))})),d.length){let e=p||d.some((e=>"function"==typeof e));const t=()=>{const e=Object.assign({},...d.map((e=>"function"==typeof e?e(u):e)));return Object.assign({},p?l.value:l,e)};i.attributes.style=e?Re(t):t()}if(Object.keys(f).length&&Object.entries(f).forEach((([e,t])=>{const n=i.attributes[e];i.attributes[e]=(...e)=>{n&&n(...e),t.forEach((t=>{t(...e,u)}))}})),a&&i.attributes.slot&&t.children[i.name]){const e=t.children[i.name];i.children=[rn("function"==typeof e?e(u):e)]}i.children&&(Pt(Array.isArray(i.children),"something wrong, children is not a Array"),o(i.children))})),s}return e.render&&(s.displayName=`fragment-${e.render.displayName||e.render.name||e.name}`),e.nonReactive?s():Yt(s)}!function(){const e=function(){const e=new WeakMap,t=Dt();return function(n){return e.has(n)||e.set(n,t()),e.get(n)}}(),t=Dt();window.AXII_HELPERS={computation:null,observe(n){const r=window.AXII_HELPERS;if(r.unobserve)return;let o=null,i=null;const a=(c={compute(n,r,a){const c=Lt(n.computed);o={id:e(c),object:c,name:n.displayName||n.name,indeps:ot(n,(t=>{t.id||(t.id=e(t.object)),t.name=t.computation?t.computation.displayName||t.computation.name:t.id,t.computation&&r.has(t.computation)?t.changed=!0:t.changed=a.has(t.indep),t.indeps||(t.scope=Bt.get(t.indep))}))},i=t()},end(){}},ze.add(c),()=>{ze.delete(c)});var c;r.getCurrentIndepTree=e=>[i,o],r.getTargetByPath=e=>(console.log(e),function(e,t){let n=e;return t.forEach((e=>{n=n.indeps[e]})),n}(o,e)),r.unobserve=()=>{a(),delete r.unobserve,delete r.getCurrentIndepTree}}}}();var Jn=Object.defineProperty,Zn=Object.prototype.hasOwnProperty,Yn=Object.getOwnPropertySymbols,er=Object.prototype.propertyIsEnumerable,tr=(e,t,n)=>t in e?Jn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nr=(e,t)=>{for(var n in t||(t={}))Zn.call(t,n)&&tr(e,n,t[n]);if(Yn)for(var n of Yn(t))er.call(t,n)&&tr(e,n,t[n]);return e};const rr=function(e){const t={};return t.Provider=function({value:n=e,children:r}){return function(e,t){_t().contexts.set(e,t)}(t,n),r},t}({}),or=e=>{const t=function(e){let t,n=_t();for(;void 0===t&&n;)t=n.contexts.get(e),n=n.parent;return t}(rr);return"function"==typeof e?e(t):nr(nr({},t),e)},ir={inlineCode:"code",wrapper:e=>nn(C,{},...e.children)},ar=e=>{const{components:t,mdxType:n,originalType:r,parentName:o,children:i=[]}=e,a=((e,t)=>{var n={};for(var r in e)Zn.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Yn)for(var r of Yn(e))t.indexOf(r)<0&&er.call(e,r)&&(n[r]=e[r]);return n})(e,["components","mdxType","originalType","parentName","children"]),c=or(t),s=n,l=c[`${o}.${s}`]||c[s]||ir[s]||r;return t?nn(l,nr(nr({},a),{components:t}),...i):nn(l,nr({},a),...i)};function cr(e,t,...n){const r=t&&t.mdxType;if("string"==typeof e||r){const o={};for(let e in t)hasOwnProperty.call(t,e)&&"children"!==e&&(o[e]=t[e]);return o.originalType=e,o.mdxType="string"==typeof e?e:r,nn(ar,o,...n)}return nn(e,t,...n)}function sr(){const e=jt(""),t=jt(""),n=Pe((()=>`${e.value}-${t.value}`),void 0,r);var r;return nn("div",null,nn("input",{value:e,placeholder:"firstName",onInput:t=>{e.value=t.target.value}}),nn("input",{value:t,placeholder:"lastName",onInput:e=>{t.value=e.target.value}}),nn("div",null,"Hello, ",n,"."))}ar.displayName="MDXCreateElement",cr.Fragment=C;function lr({code:e,instance:t}){const n={current:null};return function(e){const t=_t();Pt(t,"can only use useEffect in component render function"),t.viewEffects.push(e)}((()=>{f(n.current,{value:e,mode:"jsx",theme:"material",readOnly:!0})})),nn("container",{block:!0,"block-margin-top-10px":!0},nn("tag",{inline:!0},"Example"),nn("demo",{block:!0,"block-padding-10px":!0},t),nn("codeContainer",null,nn("div",{ref:n})))}lr.Style=e=>{e.root.elements.container.style({position:"relative"}),e.root.elements.tag.style({position:"absolute",top:0,left:0,fontSize:12,padding:"2px 8px"}),e.root.elements.demo.style({paddingTop:40,border:"1px #cecece solid",borderRadius:4})};var ur=Qn(lr);function pr(e){var{components:t}=e,n=a(e,["components"]);return cr("wrapper",i({components:t},n),cr("h1",null,"AXII 组件基本概念"),cr("h2",null,"使用 Reactive Data。"),cr("ul",null,cr("li",{parentName:"ul"},"使用 ",cr("inlineCode",{parentName:"li"},"ref")," 来创建 string/number/boolean 等非对象数据。对于不需要深度监听的对象数据，也可以使用 ref。"),cr("li",{parentName:"ul"},"ref 创建的数据要使用 .value 来取值和修改。绑定到 form 组件上时不需要使用 .value。"),cr("li",{parentName:"ul"},"使用 computed 创建计算数据。计算数据会自动监听内部依赖的数据，并进行更新。")),cr("h2",null,"AXII 实现了局部更新"),cr("p",null,"视图的每个节点只当自己绑定的 reactive 数据变化时才会局部变化。\n如果没有外部引起的变化，那么组件函数只会执行一次。"),cr(ur,{instance:cr(sr,{parentName:"Code",mdxType:"Basic"}),code:"import { createElement, ref, computed } from 'axii'\n\nexport default function Basic() {\n  const firstName = ref('')\n  const lastName = ref('')\n  const fullName = computed(() => `${firstName.value}-${lastName.value}`)\n\n  const setFirstName = (e) => {\n    firstName.value = e.target.value\n  }\n\n  const setLastName = (e) => {\n    lastName.value = e.target.value\n  }\n\n  return (\n    <div>\n      <input value={firstName} placeholder=\"firstName\" onInput={setFirstName}/>\n      <input value={lastName} placeholder=\"lastName\" onInput={setLastName}/>\n      <div>Hello, {fullName}.</div>\n    </div>\n  )\n}",mdxType:"Code"}))}function dr(){const e=jt(""),t=bt([]);return nn("div",null,nn("input",{value:e,placeholder:"plan something",onInput:t=>e.value=t.target.value}),nn("button",{onClick:()=>{t.push(e.value),e.value=""}},"add"),nn("ul",null,(function(){return t.map(((e,n)=>nn("li",null,nn("span",null,e),nn("button",{onClick:()=>{return e=n,void t.splice(e,1);var e}},"x"))))})))}pr.isMDXComponent=!0;function fr(e){var{components:t}=e,n=a(e,["components"]);return cr("wrapper",i({components:t},n),cr("h2",null,"动态结构"),cr("p",null,"如果要返回动态的结构，例如循环输出，或者条件控制，只需要将写成函数即可。\n未来会考虑自动识别动态结构的表达式。"),cr(ur,{instance:cr(dr,{parentName:"Code",mdxType:"DynamicStructure"}),code:"import {createElement, ref, reactive} from 'axii'\nexport default function Code() {\n  const inputItem = ref('')\n  const items = reactive([])\n\n  const setInputItem = (e) => inputItem.value = e.target.value\n  const addItem = () => {\n    items.push(inputItem.value)\n    inputItem.value = ''\n  }\n\n  const removeItem = (index) => {\n    items.splice(index, 1)\n  }\n\n  return (\n    <div>\n      <input value={inputItem} placeholder=\"plan something\" onInput={setInputItem}/>\n      <button onClick={addItem}>add</button>\n      <ul>\n        {function List() {\n          return items.map((item, i) => (\n            <li>\n              <span>{item}</span>\n              <button onClick={() => removeItem(i)}>x</button>\n            </li>\n          ))\n        }}\n      </ul>\n    </div>\n  )\n}",mdxType:"Code"}))}fr.isMDXComponent=!0;function yr(e){var{components:t}=e,n=a(e,["components"]);return cr("wrapper",i({components:t},n),cr("h2",null,"Component Utility"),cr("p",null,"使用 AXII 提供的 createComponent 来创建组件可以享受到三大能力。"),cr("ul",null,cr("li",{parentName:"ul"},"样式系统",cr("ul",{parentName:"li"},cr("li",{parentName:"ul"},"纯样式逻辑与其他逻辑的分离"),cr("li",{parentName:"ul"},"布局演示与非布局样式的分离"))),cr("li",{parentName:"ul"},"组件行为的控制",cr("ul",{parentName:"li"},cr("li",{parentName:"ul"},"自动实现 callback"),cr("li",{parentName:"ul"},"自动实现 controlled/uncontrolled"))),cr("li",{parentName:"ul"},"feature based 组件逻辑拆分")))}function hr(){return nn("todoList",{block:!0,"block-width":"100%"},nn("todoItem",{block:!0,"flex-display":!0,"flex-justify-content":"space-between"},nn("name",null,"swimming"),nn("action",null,"delete")),nn("todoItem",{block:!0,"flex-display":!0,"flex-justify-content-space-between":!0},nn("name",null,"swimming"),nn("action",null,"delete")))}yr.isMDXComponent=!0;function mr(e){var{components:t}=e,n=a(e,["components"]);return cr("wrapper",i({components:t},n),cr("h2",null,"layout 样式"),cr("p",null,'layout 样式指的是"盒子"大小、位置相关的样式。例如 display/width/height。\n因为 layout 样式通常和结构有关。例如 display:flex 影响的是当前元素下的子元素位置。\n为了让我们写组、改动组件结构时更好地同步处理 layout 样式，我们为所有原生提供了 layout attribute。'),cr("p",null,"遵循以下步骤:"),cr("ol",null,cr("li",{parentName:"ol"},"使用有语义的自定义标签名来替代原生标签名。"),cr("li",{parentName:"ol"},"指定 text/inline/block"),cr("li",{parentName:"ol"},"如果有需要，可以用 flex-display 或者 自己定义的 display。"),cr("li",{parentName:"ol"},"设置 width/height 或者相应 display 的属性。")),cr("p",null,'layout attribute 提供"连写"的写法来更快地书写:\nflex-justify-content="space-between"\nflex-justify-content-space-between'),cr("p",null,"只要提供一个 boolean 值，就可以动态控制是否需要该 layout attribute。\nflex-justify-content-space-between=",!0),cr(ur,{instance:cr(hr,{parentName:"Code",mdxType:"LayoutStyle"}),code:'import { createElement } from \'axii\'\nexport default function Code() {\n  return (\n    <todoList block block-width="100%">\n      <todoItem block flex-display flex-justify-content="space-between">\n        <name>swimming</name>\n        <action>delete</action>\n      </todoItem>\n      <todoItem block flex-display flex-justify-content-space-between>\n        <name>swimming</name>\n        <action>delete</action>\n      </todoItem>\n    </todoList>\n  )\n}',mdxType:"Code"}))}function vr(){return nn("input",null)}mr.isMDXComponent=!0,vr.Style=e=>{e.root.elements.input.style((({focused:e})=>({borderStyle:"solid",borderWidth:1,borderColor:e.value?"black":"blue"})))},vr.Style.propTypes={focused:En.bool.default((()=>jt(!1))),onFocus:En.callback.default((()=>({focused:e})=>e.value=!0)),onBlur:En.callback.default((()=>({focused:e})=>e.value=!1))};var gr=Qn(vr);function br(e){var{components:t}=e,n=a(e,["components"]);return cr("wrapper",i({components:t},n),cr("h2",null,"非 layout 样式"),cr("p",null,"非 layout 样式指的是和结构无关的样式，例如 color/font-family 等。\n非 layout 样式是利用 createComponent 提供的 feature 能力实现的。"),cr("p",null,"feature 可以声明自己的 propType，监听事件。"),cr(ur,{instance:cr(gr,{parentName:"Code",mdxType:"NonLayoutStyle"}),code:"import { createElement, ref, createComponent, propTypes } from 'axii'\n\nfunction Component() {\n  return <input />\n}\n\nComponent.Style = (fragments) => {\n  const rootElements = fragments.root.elements\n  rootElements.input.style(({focused}) => {\n    return {\n      borderStyle: 'solid',\n      borderWidth: 1,\n      borderColor: focused.value ? 'black': 'blue'\n    }\n  })\n}\n\nComponent.Style.propTypes = {\n  focused: propTypes.bool.default(() => ref(false)),\n  onFocus: propTypes.callback.default(() => ({focused}) => focused.value = true),\n  onBlur: propTypes.callback.default(() => ({focused}) => focused.value = false)\n}\n\nexport default createComponent(Component)\n",mdxType:"Code"}))}function wr({value:e,onChange:t}){return nn("input",{value:e,onChange:t})}function kr(){return nn("container",null,nn(wr,null))}br.isMDXComponent=!0,wr.propTypes={value:En.string.default((()=>jt(""))),onChange:En.callback.default((()=>({value:e},t,n)=>{e.value=n.target.value}))};function Er(e){var{components:t}=e,n=a(e,["components"]);return cr("wrapper",i({components:t},n),cr("h2",null,"event callback & controlled/uncontrolled"),cr("p",null,"用户可以给组件传入函数 property，如果函数作为 event callback 挂在到事件上，那么调用时 AXII 会如果 event 作为参数。\n如果该函数 property 在 propType 中声明为 propTypes.callback。那么 AXII 会其增强一下功能："),cr("ul",null,cr("li",{parentName:"ul"},"自动为 event callback 补充 3 个参数。"),cr("li",{parentName:"ul"},"draftProps: 用户可以直接修改。"),cr("li",{parentName:"ul"},"props: 原始的 props，不能修改。"),cr("li",{parentName:"ul"},"event。"),cr("li",{parentName:"ul"},"通过 return false 阻止默认 callback 对数据的修改。"),cr("li",{parentName:"ul"},"通过 overwrite 标记来完全控制组件的行为。")),cr("p",null,"根据传入数据 property 的不同，组件对数据的操作会不同，最终引起组件行为的不同："),cr("ul",null,cr("li",{parentName:"ul"},"传入 reactive data：组件会使用 propTypes 定义的 default event callback 进行修改。"),cr("li",{parentName:"ul"},"传入原始数据：不会进行修改。"),cr("li",{parentName:"ul"},"不传入：组件会使用 propTypes 上定义的 default 数据自行构造。")),cr(ur,{instance:cr(kr,{parentName:"Code",mdxType:"ComponentBasic"}),code:"/** @jsx createElement */\nimport { createElement, ref, propTypes } from 'axii'\n\nfunction Input({ value, onChange}) {\n  return <input value={value} onChange={onChange}/>\n}\n\nInput.propTypes = {\n  value: propTypes.string.default(() => ref('')),\n  onChange: propTypes.callback.default(() => ({value}, props, e) => {\n    value.value = e.target.value\n  })\n}\n\nexport default function InputDemo() {\n\n  return <container>\n    <Input />\n  </container>\n}\n\n",mdxType:"Code"}))}Er.isMDXComponent=!0;function jr(e){var{components:t}=e,n=a(e,["components"]);return cr("wrapper",i({components:t},n),cr("h2",null,"feature based(experimental)"),cr("p",null,"可以将代码能力按照 feature 而不是结构分离。\nfeature 可以声明自己的数据、事件、样式，修改原始结构。\n可以在运行时，更加动态地控制组件行为，例如监听任何组件内部任何元素的任何事件。"),cr("p",null,"Feature 可控制的行为："),cr("ul",null,cr("li",{parentName:"ul"},"样式"),cr("li",{parentName:"ul"},"fragment 渲染结果"),cr("li",{parentName:"ul"},"注册节点事件回调")))}jr.isMDXComponent=!0;const Cr=[pr,fr,yr,mr,br,Er,jr];function Or(){return nn("container",null,nn("outline",{block:!0,"block-position-fixed":!0,"block-top-20px":!0,"block-left-20px":!0,"block-padding-20px":!0},nn("part",{block:!0},nn("name",{block:!0,use:"a",href:"#chapter1"},"Axii 基本用法"),nn("children",{block:!0,"block-margin-left-20px":!0},nn("name",{block:!0,use:"a",href:"#chapter1"},"reactive 数据和事件"),nn("name",{block:!0,use:"a",href:"#chapter2"},"动态的结构"))),nn("part",{block:!0},nn("name",{block:!0,use:"a",href:"#chapter3"},"创建更好的组件和组件库"),nn("children",{block:!0,"block-margin-left-20px":!0},nn("name",{block:!0,use:"a",href:"#chapter4"},"layout 样式"),nn("name",{block:!0,use:"a",href:"#chapter5"},"非 layout 样式"),nn("name",{block:!0,use:"a",href:"#chapter6"},"对组件的控制"),nn("name",{block:!0,use:"a",href:"#chapter7"},"扩展和覆写组件"))),nn("part",{block:!0},nn("name",null,"FAQ"))),nn("chapters",{block:!0,"block-max-width-800px":!0,"block-margin-left-auto":!0,"block-margin-right-auto":!0},Cr.map(((e,t)=>nn("chapter",{block:!0,"block-margin-bottom-80px":!0,"block-padding-bottom-80px":!0,id:`chapter${t+1}`},nn(e,null))))))}Or.Style=e=>{e.root.elements.outline.style({background:"#fff",border:"1px #cecece dashed",zIndex:999}),e.root.elements.name.style({fontSize:14,lineHeight:1,color:"#666666",marginBottom:14}),e.root.elements.chapter.style({borderBottom:"1px #cecece dashed"})};!function(e,t,...n){t.innerHTML="";const r=zn(t,...n),o=oe(r.viewInterfaces,t,r.interceptViewActions),i=j(function(e,t=S,n=D,r=M,o=A){const i=g("com");function a(e,t){const r=new n;return y(!(e.ref&&!e.type.forwardRef),`${e.type.displayName||e.type.name} do not accept ref, but you passed ref prop to it.`),Object.assign(r,{type:e.type,displayName:e.type.displayName||e.type.name,props:e.attributes||{},level:t?t.level+1:0,ref:(n.forwardRef,e.ref),parent:t,id:i()}),r.props.children=e.children,e.type.forwardRef&&(r.props.ref=e.ref),r}const c={isComponentVnode:t,createCnode:a,diffNodeDetail:r,normalizeLeaf:o};return{paint:t=>{if(t.isPainted)throw new Error(`cnode already painted ${t.type.displayName}`);return z(t,e,c)},repaint:t=>{if(!t.isPainted)throw new Error(`cnode is not painted ${t.type.displayName}`);return H(t,e,c)},handle:t=>void 0===t.ret?z(t,e,c):H(t,e,c),createCnode:a}}(r.painterInterfaces.renderer,r.painterInterfaces.isComponentVnode,r.painterInterfaces.ComponentNode,r.painterInterfaces.diffNodeDetail,r.painterInterfaces.normalizeLeaf),o,r.schedulerInterfaces);r.receiveScheduler(i),r.paint(e)}(nn(Qn(Or),null),document.getElementById("root"));
