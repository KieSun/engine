# 组件库与框架的约定


## 1. 对全局变量的使用和对全局环境的监听

### 对 window/history/document 等的调用

由框架注入， 防止全局污染，同时可以做 mock。

### 对父组件位置/大小信息的获取和监听

由框架注入所谓的父组件信息，防止一些意外情况,？
可能出现监听外部 resize 的情况，同时还要求有 throttle 的功能。应该由框架提供监听事件抛出的
方式，或者由框架提供 throttle 函数。这样才能确保之后可以完全控制渲染的进度。


## 2. 对 dom ref 的控制

### 需要通过获取第一渲染后的 dom 信息再进行调整。

由框架的 digest 过程来控制。提供 componentDidPaint 来控制。这个过程早于 componentDidMount。


## 3. 组件的状态非瞬时改变，而是有持续时间的 

可能会对 setTimeout/css 状态有调用。需要框架提供统一的表达方式来记录。


## 4. 需要突破当前的组件树结构，实现全局的 modal，或者在相应的位置挂载一个浮层。

由框架提供成高阶组件注入。不允许组件单独利用 modal 来创建 dom。


## 5. upload 这类组件需要外部注入 ajax util/时序控制 
